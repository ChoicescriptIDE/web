"use strict";/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.38.0(4b4e1c7432eee9f6fb7feaccacead2aa0963f420)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
define("vs/language/choicescript/choicescriptMode", ["require","require"],(require)=>{
var moduleExports=(()=>{var qe=Object.create;var W=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Qe=Object.getOwnPropertyNames;var Ge=Object.getPrototypeOf,Je=Object.prototype.hasOwnProperty;var Ye=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(n,i)=>(typeof require!="undefined"?require:n)[i]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Ze=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Ke=(t,n)=>{for(var i in n)W(t,i,{get:n[i],enumerable:!0})},L=(t,n,i,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of Qe(n))!Je.call(t,e)&&e!==i&&W(t,e,{get:()=>n[e],enumerable:!(r=Be(n,e))||r.enumerable});return t},ae=(t,n,i)=>(L(t,n,"default"),i&&L(i,n,"default")),oe=(t,n,i)=>(i=t!=null?qe(Ge(t)):{},L(n||!t||!t.__esModule?W(i,"default",{value:t,enumerable:!0}):i,t)),et=t=>L(W({},"__esModule",{value:!0}),t);var ce=Ze((mt,ue)=>{var tt=oe(Ye("vs/editor/editor.api"));ue.exports=tt});var ht={};Ke(ht,{setupMode:()=>pt});var d={};ae(d,oe(ce()));var nt=2*60*1e3,F=class{_defaults;_idleCheckInterval;_lastUsedTime;_configChangeListener;_worker;_client;constructor(n){this._defaults=n,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>nt&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=d.editor.createWebWorker({moduleId:"vs/language/choicescript/choicescriptWorker",label:this._defaults.languageId,createData:{languageSettings:this._defaults.diagnosticsOptions,languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...n){let i;return this._getClient().then(r=>{i=r}).then(r=>{if(this._worker)return this._worker.withSyncedResources(n)}).then(r=>i)}};var de;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(de||(de={}));var U;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(U||(U={}));var y;(function(t){function n(r,e){return r===Number.MAX_VALUE&&(r=U.MAX_VALUE),e===Number.MAX_VALUE&&(e=U.MAX_VALUE),{line:r,character:e}}t.create=n;function i(r){var e=r;return o.objectLiteral(e)&&o.uinteger(e.line)&&o.uinteger(e.character)}t.is=i})(y||(y={}));var _;(function(t){function n(r,e,s,a){if(o.uinteger(r)&&o.uinteger(e)&&o.uinteger(s)&&o.uinteger(a))return{start:y.create(r,e),end:y.create(s,a)};if(y.is(r)&&y.is(e))return{start:r,end:e};throw new Error("Range#create called with invalid arguments["+r+", "+e+", "+s+", "+a+"]")}t.create=n;function i(r){var e=r;return o.objectLiteral(e)&&y.is(e.start)&&y.is(e.end)}t.is=i})(_||(_={}));var ee;(function(t){function n(r,e){return{uri:r,range:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&_.is(e.range)&&(o.string(e.uri)||o.undefined(e.uri))}t.is=i})(ee||(ee={}));var le;(function(t){function n(r,e,s,a){return{targetUri:r,targetRange:e,targetSelectionRange:s,originSelectionRange:a}}t.create=n;function i(r){var e=r;return o.defined(e)&&_.is(e.targetRange)&&o.string(e.targetUri)&&(_.is(e.targetSelectionRange)||o.undefined(e.targetSelectionRange))&&(_.is(e.originSelectionRange)||o.undefined(e.originSelectionRange))}t.is=i})(le||(le={}));var te;(function(t){function n(r,e,s,a){return{red:r,green:e,blue:s,alpha:a}}t.create=n;function i(r){var e=r;return o.numberRange(e.red,0,1)&&o.numberRange(e.green,0,1)&&o.numberRange(e.blue,0,1)&&o.numberRange(e.alpha,0,1)}t.is=i})(te||(te={}));var fe;(function(t){function n(r,e){return{range:r,color:e}}t.create=n;function i(r){var e=r;return _.is(e.range)&&te.is(e.color)}t.is=i})(fe||(fe={}));var ge;(function(t){function n(r,e,s){return{label:r,textEdit:e,additionalTextEdits:s}}t.create=n;function i(r){var e=r;return o.string(e.label)&&(o.undefined(e.textEdit)||w.is(e))&&(o.undefined(e.additionalTextEdits)||o.typedArray(e.additionalTextEdits,w.is))}t.is=i})(ge||(ge={}));var pe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(pe||(pe={}));var he;(function(t){function n(r,e,s,a,u){var c={startLine:r,endLine:e};return o.defined(s)&&(c.startCharacter=s),o.defined(a)&&(c.endCharacter=a),o.defined(u)&&(c.kind=u),c}t.create=n;function i(r){var e=r;return o.uinteger(e.startLine)&&o.uinteger(e.startLine)&&(o.undefined(e.startCharacter)||o.uinteger(e.startCharacter))&&(o.undefined(e.endCharacter)||o.uinteger(e.endCharacter))&&(o.undefined(e.kind)||o.string(e.kind))}t.is=i})(he||(he={}));var ne;(function(t){function n(r,e){return{location:r,message:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&ee.is(e.location)&&o.string(e.message)}t.is=i})(ne||(ne={}));var T;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(T||(T={}));var ve;(function(t){t.Unnecessary=1,t.Deprecated=2})(ve||(ve={}));var me;(function(t){function n(i){var r=i;return r!=null&&o.string(r.href)}t.is=n})(me||(me={}));var j;(function(t){function n(r,e,s,a,u,c){var g={range:r,message:e};return o.defined(s)&&(g.severity=s),o.defined(a)&&(g.code=a),o.defined(u)&&(g.source=u),o.defined(c)&&(g.relatedInformation=c),g}t.create=n;function i(r){var e,s=r;return o.defined(s)&&_.is(s.range)&&o.string(s.message)&&(o.number(s.severity)||o.undefined(s.severity))&&(o.integer(s.code)||o.string(s.code)||o.undefined(s.code))&&(o.undefined(s.codeDescription)||o.string((e=s.codeDescription)===null||e===void 0?void 0:e.href))&&(o.string(s.source)||o.undefined(s.source))&&(o.undefined(s.relatedInformation)||o.typedArray(s.relatedInformation,ne.is))}t.is=i})(j||(j={}));var A;(function(t){function n(r,e){for(var s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];var u={title:r,command:e};return o.defined(s)&&s.length>0&&(u.arguments=s),u}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.title)&&o.string(e.command)}t.is=i})(A||(A={}));var w;(function(t){function n(s,a){return{range:s,newText:a}}t.replace=n;function i(s,a){return{range:{start:s,end:s},newText:a}}t.insert=i;function r(s){return{range:s,newText:""}}t.del=r;function e(s){var a=s;return o.objectLiteral(a)&&o.string(a.newText)&&_.is(a.range)}t.is=e})(w||(w={}));var E;(function(t){function n(r,e,s){var a={label:r};return e!==void 0&&(a.needsConfirmation=e),s!==void 0&&(a.description=s),a}t.create=n;function i(r){var e=r;return e!==void 0&&o.objectLiteral(e)&&o.string(e.label)&&(o.boolean(e.needsConfirmation)||e.needsConfirmation===void 0)&&(o.string(e.description)||e.description===void 0)}t.is=i})(E||(E={}));var x;(function(t){function n(i){var r=i;return typeof r=="string"}t.is=n})(x||(x={}));var k;(function(t){function n(s,a,u){return{range:s,newText:a,annotationId:u}}t.replace=n;function i(s,a,u){return{range:{start:s,end:s},newText:a,annotationId:u}}t.insert=i;function r(s,a){return{range:s,newText:"",annotationId:a}}t.del=r;function e(s){var a=s;return w.is(a)&&(E.is(a.annotationId)||x.is(a.annotationId))}t.is=e})(k||(k={}));var O;(function(t){function n(r,e){return{textDocument:r,edits:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&V.is(e.textDocument)&&Array.isArray(e.edits)}t.is=i})(O||(O={}));var M;(function(t){function n(r,e,s){var a={kind:"create",uri:r};return e!==void 0&&(e.overwrite!==void 0||e.ignoreIfExists!==void 0)&&(a.options=e),s!==void 0&&(a.annotationId=s),a}t.create=n;function i(r){var e=r;return e&&e.kind==="create"&&o.string(e.uri)&&(e.options===void 0||(e.options.overwrite===void 0||o.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||o.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||x.is(e.annotationId))}t.is=i})(M||(M={}));var P;(function(t){function n(r,e,s,a){var u={kind:"rename",oldUri:r,newUri:e};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(u.options=s),a!==void 0&&(u.annotationId=a),u}t.create=n;function i(r){var e=r;return e&&e.kind==="rename"&&o.string(e.oldUri)&&o.string(e.newUri)&&(e.options===void 0||(e.options.overwrite===void 0||o.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||o.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||x.is(e.annotationId))}t.is=i})(P||(P={}));var D;(function(t){function n(r,e,s){var a={kind:"delete",uri:r};return e!==void 0&&(e.recursive!==void 0||e.ignoreIfNotExists!==void 0)&&(a.options=e),s!==void 0&&(a.annotationId=s),a}t.create=n;function i(r){var e=r;return e&&e.kind==="delete"&&o.string(e.uri)&&(e.options===void 0||(e.options.recursive===void 0||o.boolean(e.options.recursive))&&(e.options.ignoreIfNotExists===void 0||o.boolean(e.options.ignoreIfNotExists)))&&(e.annotationId===void 0||x.is(e.annotationId))}t.is=i})(D||(D={}));var re;(function(t){function n(i){var r=i;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(e){return o.string(e.kind)?M.is(e)||P.is(e)||D.is(e):O.is(e)}))}t.is=n})(re||(re={}));var N=function(){function t(n,i){this.edits=n,this.changeAnnotations=i}return t.prototype.insert=function(n,i,r){var e,s;if(r===void 0?e=w.insert(n,i):x.is(r)?(s=r,e=k.insert(n,i,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),e=k.insert(n,i,s)),this.edits.push(e),s!==void 0)return s},t.prototype.replace=function(n,i,r){var e,s;if(r===void 0?e=w.replace(n,i):x.is(r)?(s=r,e=k.replace(n,i,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),e=k.replace(n,i,s)),this.edits.push(e),s!==void 0)return s},t.prototype.delete=function(n,i){var r,e;if(i===void 0?r=w.del(n):x.is(i)?(e=i,r=k.del(n,i)):(this.assertChangeAnnotations(this.changeAnnotations),e=this.changeAnnotations.manage(i),r=k.del(n,e)),this.edits.push(r),e!==void 0)return e},t.prototype.add=function(n){this.edits.push(n)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(n){if(n===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),_e=function(){function t(n){this._annotations=n===void 0?Object.create(null):n,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(n,i){var r;if(x.is(n)?r=n:(r=this.nextId(),i=n),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(i===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=i,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),wt=function(){function t(n){var i=this;this._textEditChanges=Object.create(null),n!==void 0?(this._workspaceEdit=n,n.documentChanges?(this._changeAnnotations=new _e(n.changeAnnotations),n.changeAnnotations=this._changeAnnotations.all(),n.documentChanges.forEach(function(r){if(O.is(r)){var e=new N(r.edits,i._changeAnnotations);i._textEditChanges[r.textDocument.uri]=e}})):n.changes&&Object.keys(n.changes).forEach(function(r){var e=new N(n.changes[r]);i._textEditChanges[r]=e})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(n){if(V.is(n)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i={uri:n.uri,version:n.version},r=this._textEditChanges[i.uri];if(!r){var e=[],s={textDocument:i,edits:e};this._workspaceEdit.documentChanges.push(s),r=new N(e,this._changeAnnotations),this._textEditChanges[i.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[n];if(!r){var e=[];this._workspaceEdit.changes[n]=e,r=new N(e),this._textEditChanges[n]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new _e,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(n,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var e;E.is(i)||x.is(i)?e=i:r=i;var s,a;if(e===void 0?s=M.create(n,r):(a=x.is(e)?e:this._changeAnnotations.manage(e),s=M.create(n,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},t.prototype.renameFile=function(n,i,r,e){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;E.is(r)||x.is(r)?s=r:e=r;var a,u;if(s===void 0?a=P.create(n,i,e):(u=x.is(s)?s:this._changeAnnotations.manage(s),a=P.create(n,i,e,u)),this._workspaceEdit.documentChanges.push(a),u!==void 0)return u},t.prototype.deleteFile=function(n,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var e;E.is(i)||x.is(i)?e=i:r=i;var s,a;if(e===void 0?s=D.create(n,r):(a=x.is(e)?e:this._changeAnnotations.manage(e),s=D.create(n,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},t}();var xe;(function(t){function n(r){return{uri:r}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.uri)}t.is=i})(xe||(xe={}));var be;(function(t){function n(r,e){return{uri:r,version:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.uri)&&o.integer(e.version)}t.is=i})(be||(be={}));var V;(function(t){function n(r,e){return{uri:r,version:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.uri)&&(e.version===null||o.integer(e.version))}t.is=i})(V||(V={}));var ye;(function(t){function n(r,e,s,a){return{uri:r,languageId:e,version:s,text:a}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.string(e.uri)&&o.string(e.languageId)&&o.integer(e.version)&&o.string(e.text)}t.is=i})(ye||(ye={}));var R;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(R||(R={}));(function(t){function n(i){var r=i;return r===t.PlainText||r===t.Markdown}t.is=n})(R||(R={}));var ie;(function(t){function n(i){var r=i;return o.objectLiteral(i)&&R.is(r.kind)&&o.string(r.value)}t.is=n})(ie||(ie={}));var h;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(h||(h={}));var H;(function(t){t.PlainText=1,t.Snippet=2})(H||(H={}));var ke;(function(t){t.Deprecated=1})(ke||(ke={}));var we;(function(t){function n(r,e,s){return{newText:r,insert:e,replace:s}}t.create=n;function i(r){var e=r;return e&&o.string(e.newText)&&_.is(e.insert)&&_.is(e.replace)}t.is=i})(we||(we={}));var Ie;(function(t){t.asIs=1,t.adjustIndentation=2})(Ie||(Ie={}));var Ce;(function(t){function n(i){return{label:i}}t.create=n})(Ce||(Ce={}));var Te;(function(t){function n(i,r){return{items:i||[],isIncomplete:!!r}}t.create=n})(Te||(Te={}));var z;(function(t){function n(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=n;function i(r){var e=r;return o.string(e)||o.objectLiteral(e)&&o.string(e.language)&&o.string(e.value)}t.is=i})(z||(z={}));var Ee;(function(t){function n(i){var r=i;return!!r&&o.objectLiteral(r)&&(ie.is(r.contents)||z.is(r.contents)||o.typedArray(r.contents,z.is))&&(i.range===void 0||_.is(i.range))}t.is=n})(Ee||(Ee={}));var Se;(function(t){function n(i,r){return r?{label:i,documentation:r}:{label:i}}t.create=n})(Se||(Se={}));var Ae;(function(t){function n(i,r){for(var e=[],s=2;s<arguments.length;s++)e[s-2]=arguments[s];var a={label:i};return o.defined(r)&&(a.documentation=r),o.defined(e)?a.parameters=e:a.parameters=[],a}t.create=n})(Ae||(Ae={}));var Me;(function(t){t.Text=1,t.Read=2,t.Write=3})(Me||(Me={}));var Pe;(function(t){function n(i,r){var e={range:i};return o.number(r)&&(e.kind=r),e}t.create=n})(Pe||(Pe={}));var v;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(v||(v={}));var De;(function(t){t.Deprecated=1})(De||(De={}));var Re;(function(t){function n(i,r,e,s,a){var u={name:i,kind:r,location:{uri:s,range:e}};return a&&(u.containerName=a),u}t.create=n})(Re||(Re={}));var Le;(function(t){function n(r,e,s,a,u,c){var g={name:r,detail:e,kind:s,range:a,selectionRange:u};return c!==void 0&&(g.children=c),g}t.create=n;function i(r){var e=r;return e&&o.string(e.name)&&o.number(e.kind)&&_.is(e.range)&&_.is(e.selectionRange)&&(e.detail===void 0||o.string(e.detail))&&(e.deprecated===void 0||o.boolean(e.deprecated))&&(e.children===void 0||Array.isArray(e.children))&&(e.tags===void 0||Array.isArray(e.tags))}t.is=i})(Le||(Le={}));var We;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(We||(We={}));var Fe;(function(t){function n(r,e){var s={diagnostics:r};return e!=null&&(s.only=e),s}t.create=n;function i(r){var e=r;return o.defined(e)&&o.typedArray(e.diagnostics,j.is)&&(e.only===void 0||o.typedArray(e.only,o.string))}t.is=i})(Fe||(Fe={}));var Ne;(function(t){function n(r,e,s){var a={title:r},u=!0;return typeof e=="string"?(u=!1,a.kind=e):A.is(e)?a.command=e:a.edit=e,u&&s!==void 0&&(a.kind=s),a}t.create=n;function i(r){var e=r;return e&&o.string(e.title)&&(e.diagnostics===void 0||o.typedArray(e.diagnostics,j.is))&&(e.kind===void 0||o.string(e.kind))&&(e.edit!==void 0||e.command!==void 0)&&(e.command===void 0||A.is(e.command))&&(e.isPreferred===void 0||o.boolean(e.isPreferred))&&(e.edit===void 0||re.is(e.edit))}t.is=i})(Ne||(Ne={}));var Ue;(function(t){function n(r,e){var s={range:r};return o.defined(e)&&(s.data=e),s}t.create=n;function i(r){var e=r;return o.defined(e)&&_.is(e.range)&&(o.undefined(e.command)||A.is(e.command))}t.is=i})(Ue||(Ue={}));var je;(function(t){function n(r,e){return{tabSize:r,insertSpaces:e}}t.create=n;function i(r){var e=r;return o.defined(e)&&o.uinteger(e.tabSize)&&o.boolean(e.insertSpaces)}t.is=i})(je||(je={}));var Oe;(function(t){function n(r,e,s){return{range:r,target:e,data:s}}t.create=n;function i(r){var e=r;return o.defined(e)&&_.is(e.range)&&(o.undefined(e.target)||o.string(e.target))}t.is=i})(Oe||(Oe={}));var Ve;(function(t){function n(r,e){return{range:r,parent:e}}t.create=n;function i(r){var e=r;return e!==void 0&&_.is(e.range)&&(e.parent===void 0||t.is(e.parent))}t.is=i})(Ve||(Ve={}));var He;(function(t){function n(s,a,u,c){return new rt(s,a,u,c)}t.create=n;function i(s){var a=s;return!!(o.defined(a)&&o.string(a.uri)&&(o.undefined(a.languageId)||o.string(a.languageId))&&o.uinteger(a.lineCount)&&o.func(a.getText)&&o.func(a.positionAt)&&o.func(a.offsetAt))}t.is=i;function r(s,a){for(var u=s.getText(),c=e(a,function(b,C){var S=b.range.start.line-C.range.start.line;return S===0?b.range.start.character-C.range.start.character:S}),g=u.length,f=c.length-1;f>=0;f--){var p=c[f],m=s.offsetAt(p.range.start),l=s.offsetAt(p.range.end);if(l<=g)u=u.substring(0,m)+p.newText+u.substring(l,u.length);else throw new Error("Overlapping edit");g=m}return u}t.applyEdits=r;function e(s,a){if(s.length<=1)return s;var u=s.length/2|0,c=s.slice(0,u),g=s.slice(u);e(c,a),e(g,a);for(var f=0,p=0,m=0;f<c.length&&p<g.length;){var l=a(c[f],g[p]);l<=0?s[m++]=c[f++]:s[m++]=g[p++]}for(;f<c.length;)s[m++]=c[f++];for(;p<g.length;)s[m++]=g[p++];return s}})(He||(He={}));var rt=function(){function t(n,i,r,e){this._uri=n,this._languageId=i,this._version=r,this._content=e,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(n){if(n){var i=this.offsetAt(n.start),r=this.offsetAt(n.end);return this._content.substring(i,r)}return this._content},t.prototype.update=function(n,i){this._content=n.text,this._version=i,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var n=[],i=this._content,r=!0,e=0;e<i.length;e++){r&&(n.push(e),r=!1);var s=i.charAt(e);r=s==="\r"||s===`
`,s==="\r"&&e+1<i.length&&i.charAt(e+1)===`
`&&e++}r&&i.length>0&&n.push(i.length),this._lineOffsets=n}return this._lineOffsets},t.prototype.positionAt=function(n){n=Math.max(Math.min(n,this._content.length),0);var i=this.getLineOffsets(),r=0,e=i.length;if(e===0)return y.create(0,n);for(;r<e;){var s=Math.floor((r+e)/2);i[s]>n?e=s:r=s+1}var a=r-1;return y.create(a,n-i[a])},t.prototype.offsetAt=function(n){var i=this.getLineOffsets();if(n.line>=i.length)return this._content.length;if(n.line<0)return 0;var r=i[n.line],e=n.line+1<i.length?i[n.line+1]:this._content.length;return Math.max(Math.min(r+n.character,e),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),o;(function(t){var n=Object.prototype.toString;function i(l){return typeof l<"u"}t.defined=i;function r(l){return typeof l>"u"}t.undefined=r;function e(l){return l===!0||l===!1}t.boolean=e;function s(l){return n.call(l)==="[object String]"}t.string=s;function a(l){return n.call(l)==="[object Number]"}t.number=a;function u(l,b,C){return n.call(l)==="[object Number]"&&b<=l&&l<=C}t.numberRange=u;function c(l){return n.call(l)==="[object Number]"&&-2147483648<=l&&l<=2147483647}t.integer=c;function g(l){return n.call(l)==="[object Number]"&&0<=l&&l<=2147483647}t.uinteger=g;function f(l){return n.call(l)==="[object Function]"}t.func=f;function p(l){return l!==null&&typeof l=="object"}t.objectLiteral=p;function m(l,b){return Array.isArray(l)&&l.every(b)}t.typedArray=m})(o||(o={}));var X=class{constructor(n,i,r){this._languageId=n;this._worker=i;let e=a=>{let u=a.getLanguageId();if(u===this._languageId&&r.modeConfiguration.diagnostics){let c;this._listener[a.uri.toString()]=a.onDidChangeContent(()=>{window.clearTimeout(c),c=window.setTimeout(()=>this._doValidate(a.uri,u),500)}),this._doValidate(a.uri,u)}},s=a=>{d.editor.setModelMarkers(a,this._languageId,[]);let u=a.uri.toString(),c=this._listener[u];c&&(c.dispose(),delete this._listener[u])};this._disposables.push(d.editor.onDidCreateModel(e)),this._disposables.push(d.editor.onWillDisposeModel(s)),this._disposables.push(d.editor.onDidChangeModelLanguage(a=>{s(a.model),e(a.model)})),this._disposables.push(r.onDidChange(a=>{d.editor.getModels().forEach(u=>{u.getLanguageId()===this._languageId&&(s(u),e(u))})})),this._disposables.push(r.onDictionaryChange(a=>{d.editor.getModels().forEach(u=>{u.getLanguageId()===this._languageId&&this._doValidate(u.uri,u.getLanguageId())})})),this._disposables.push({dispose:()=>{d.editor.getModels().forEach(s);for(let a in this._listener)this._listener[a].dispose()}}),d.editor.getModels().forEach(e)}_disposables=[];_listener=Object.create(null);dispose(){this._disposables.forEach(n=>n&&n.dispose()),this._disposables=[]}_doValidate(n,i){this._worker(n).then(r=>r.doValidation(n.toString())).then(r=>{let e=r.map(a=>at(n,a)),s=d.editor.getModel(n);s&&s.getLanguageId()===i&&d.editor.setModelMarkers(s,i,e)}).then(void 0,r=>{console.error(r)})}};function st(t){switch(t){case T.Error:return d.MarkerSeverity.Error;case T.Warning:return d.MarkerSeverity.Warning;case T.Information:return d.MarkerSeverity.Info;case T.Hint:return d.MarkerSeverity.Hint;default:return d.MarkerSeverity.Info}}function at(t,n){let i=typeof n.code=="number"?String(n.code):n.code;return{severity:n.severity?st(n.severity):d.MarkerSeverity.Info,startLineNumber:n.range.start.line+1,startColumn:n.range.start.character+1,endLineNumber:n.range.end.line+1,endColumn:n.range.end.character+1,message:n.message,code:i,source:n.source}}function K(t){return{character:t.column-1,line:t.lineNumber-1}}function I(t){return new d.Range(t.start.line+1,t.start.character+1,t.end.line+1,t.end.character+1)}function ot(t){return typeof t.insert<"u"&&typeof t.replace<"u"}function ut(t){let n=d.languages.CompletionItemKind;switch(t){case h.Text:return n.Text;case h.Method:return n.Method;case h.Function:return n.Function;case h.Constructor:return n.Constructor;case h.Field:return n.Field;case h.Variable:return n.Variable;case h.Class:return n.Class;case h.Interface:return n.Interface;case h.Module:return n.Module;case h.Property:return n.Property;case h.Unit:return n.Unit;case h.Value:return n.Value;case h.Enum:return n.Enum;case h.Keyword:return n.Keyword;case h.Snippet:return n.Snippet;case h.Color:return n.Color;case h.File:return n.File;case h.Reference:return n.Reference}return n.Property}function ct(t){return{range:I(t.range),text:t.newText}}var $=class{constructor(n){this._worker=n}get triggerCharacters(){return[" ",":"]}provideCompletionItems(n,i,r,e){let s=n.uri;return this._worker(s).then(a=>a.doComplete(s.toString(),K(i))).then(a=>{if(!a)return;let u=n.getWordUntilPosition(i),c=new d.Range(i.lineNumber,u.startColumn,i.lineNumber,u.endColumn),g=a.items.map(f=>{let p={label:f.label,insertText:f.insertText||f.label,sortText:f.sortText,filterText:f.filterText,documentation:f.documentation?se(f.documentation):void 0,detail:f.detail,range:c,kind:f.kind?ut(f.kind):h.Value};return f.textEdit&&(ot(f.textEdit)?p.range={insert:I(f.textEdit.insert),replace:I(f.textEdit.replace)}:p.range=I(f.textEdit.range),p.insertText=f.textEdit.newText),f.additionalTextEdits&&(p.additionalTextEdits=f.additionalTextEdits.map(ct)),f.insertTextFormat===H.Snippet&&(p.insertTextRules=d.languages.CompletionItemInsertTextRule.InsertAsSnippet),p});return{isIncomplete:a.isIncomplete,suggestions:g}})}};function dt(t){return t&&typeof t=="object"&&typeof t.kind=="string"}function se(t){return typeof t=="string"?{value:t}:dt(t)?t.kind==="plaintext"?{value:t.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:t.value}:{value:"```"+t.language+`
`+t.value+"\n```\n"}}function lt(t){return t?Array.isArray(t)?t.map(se):[se(t)]:[]}var q=class{constructor(n){this._worker=n}provideHover(n,i,r){let e=n.uri;return this._worker(e).then(s=>s.doHover(e.toString(),K(i))).then(s=>{if(!(!s||!s.range))return{range:I(s.range),contents:lt(s.contents)}})}},B=class{constructor(n){this._worker=n}provideCodeActions(n,i,r,e){let s=n.uri,a=[];return this._worker(s).then(u=>{let c=r.markers;if(!(c.length<=0)){c=c.filter(f=>f.code==="badSpelling"),c=c.slice(0,1);for(let f of c){var g=new d.Range(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn);let p=n.getWordAtPosition(new d.Position(g.startLineNumber,g.startColumn));!p||a.push({word:p.word,range:g})}if(!(a.length<=0))return u.suggestSpelling(a.map(f=>f.word))}}).then(u=>{if(!u)return;let c=[];if(u.length>0)for(var g=0;g<u[0].length;g++)c.push({title:"Correct spelling: "+u[0][g],kind:"quickfix",edit:{edits:[{edit:{range:a[0].range,text:u[0][g]},resource:n.uri}]}});return c.push({title:"Ignore '"+a[0].word+"' this session",kind:"quickfix",command:{id:"add-words",title:"Ignore Word",arguments:[{uri:s,dict:"session",words:[a[0].word]}]}}),c.push({title:"Add '"+a[0].word+"' to the User Dictionary",kind:"quickfix",command:{id:"add-words",title:"Add Word",arguments:[{uri:s,dict:"persistent",words:[a[0].word]}]}}),c.length>0?{actions:c,dispose:()=>{}}:void 0})}},Q=class{constructor(n){this._worker=n}signatureHelpTriggerCharacters=[" "];provideSignatureHelp(n,i,r,e){let s=n.uri;return this._worker(s).then(a=>{let u=n.getLineContent(i.lineNumber),c,g,f,p;if((g=u.match(/^(\s*\*gosub_scene\s+(\w+)\s+(\w+))/))?(c=!0,f=g[2],p=g[3]):(g=u.match(/^(\s*\*gosub\s+(\w+))/))&&(c=!1,p=g[2]),!g||g.length<3)return;let m=u.slice(g[1].length).trim().split(" ").filter(l=>l).length;return a.getRoutineInfo(s.toString(),n.getOffsetAt(i)).then(l=>{if(l)return{value:{signatures:[{label:`${f}.txt -> ${p}: ${l.parameters.map(b=>b.label).join(" ")}`,parameters:l.parameters}],activeSignature:l.activeSignature,activeParameter:l.activeParameter},dispose:()=>{}}})})}};function ze(t){return{uri:d.Uri.parse(t.uri),range:I(t.range)}}var G=class{constructor(n){this._worker=n}async provideDefinition(n,i,r){let e=n.uri,s=await this._worker(e);if(n.isDisposed())return;let a=await s.findDefinition(e.toString(),K(i));if(a)return n.isDisposed()?void 0:[ze(a)]}},J=class{constructor(n){this._worker=n}provideReferences(n,i,r,e){let s=n.uri;return this._worker(s).then(a=>a.findReferences(s.toString(),K(i))).then(a=>{if(!!a)return a.map(ze)})}};function ft(t){let n=d.languages.SymbolKind;switch(t){case v.File:return n.Array;case v.Module:return n.Module;case v.Namespace:return n.Namespace;case v.Package:return n.Package;case v.Class:return n.Class;case v.Method:return n.Method;case v.Property:return n.Property;case v.Field:return n.Field;case v.Constructor:return n.Constructor;case v.Enum:return n.Enum;case v.Interface:return n.Interface;case v.Function:return n.Function;case v.Variable:return n.Variable;case v.Constant:return n.Constant;case v.String:return n.String;case v.Number:return n.Number;case v.Boolean:return n.Boolean;case v.Array:return n.Array}return n.Function}var Y=class{constructor(n){this._worker=n}provideDocumentSymbols(n,i){let r=n.uri;return this._worker(r).then(e=>e.findDocumentSymbols(r.toString())).then(e=>{if(!!e)return e.map(s=>({name:s.name,detail:"",containerName:s.containerName,kind:ft(s.kind),tags:[],range:I(s.location.range),selectionRange:I(s.location.range)}))})}},Z=class{constructor(n,i){this._languageId=n;this._worker=i;let r=s=>{if(s.getLanguageId()!==this._languageId)return;let u;this._listener[s.uri.toString()]=s.onDidChangeContent(()=>{window.clearTimeout(u),u=window.setTimeout(()=>this._updateIndex(s.uri),1e3)}),this._updateIndex(s.uri)},e=s=>{this._removeIndex(s.uri);let a=s.uri.toString(),u=this._listener[a];u&&(u.dispose(),delete this._listener[a])};this._disposables.push(d.editor.onDidCreateModel(r)),this._disposables.push(d.editor.onWillDisposeModel(e)),this._disposables.push({dispose:()=>{for(let s in this._listener)this._listener[s].dispose()}}),d.editor.getModels().forEach(r)}_disposables=[];_listener=Object.create(null);_updateIndex(n){this._worker(n).then(i=>i.updateIndex(n.toString()))}_removeIndex(n){this._worker(n).then(i=>i.removeIndex(n.toString()))}dispose(){this._disposables.forEach(n=>n&&n.dispose()),this._disposables=[]}};function pt(t){let n=[],i=[],r=new F(t);n.push(r);let e=(...u)=>r.getLanguageServiceWorker(...u);function s(){let{languageId:u,modeConfiguration:c}=t;if($e(i),c.completionItems&&i.push(d.languages.registerCompletionItemProvider(u,new $(e))),c.hovers&&i.push(d.languages.registerHoverProvider(u,new q(e))),c.definitions&&i.push(d.languages.registerDefinitionProvider(u,new G(e))),c.references&&i.push(d.languages.registerReferenceProvider(u,new J(e))),c.documentSymbols&&i.push(d.languages.registerDocumentSymbolProvider(u,new Y(e))),i.push(d.languages.registerSignatureHelpProvider(u,new Q(e))),c.diagnostics&&i.push(d.languages.registerCodeActionProvider(u,new B(e))),c.diagnostics&&i.push(new X(u,e,t)),c.autoFormat){var g={".":{match:"...",result:"\u2026"},"-":{match:"--",result:"\u2014"}};i.push(d.languages.registerOnTypeFormattingEditProvider(u,{autoFormatTriggerCharacters:Object.keys(g),provideOnTypeFormattingEdits:function(f,p,m,l,b){var C=g[m].match.length,S=new d.Range(p.lineNumber,p.column>=C?p.column-C:0,p.lineNumber,p.column);if(f.getValueInRange(S)===g[m].match)return[{range:S,text:g[m].result}]}}))}i.push(new Z(u,e)),n.push(d.editor.registerCommand("add-words",(f,p)=>{Array.isArray(p)&&(p=p[0]),e(p.uri).then(m=>{m.addWords(p.words).then(l=>{t.addDictWords(p.dict,l.filter(b=>b))})})})),n.push(d.editor.registerCommand("remove-words",(f,p)=>{e(p.uri).then(m=>{m.removeWords(p.words).then(l=>{t.removeDictWords(p.dict,l.filter(b=>b))})})}))}s();let a=t.modeConfiguration;return t.onDidChange(u=>{u.modeConfiguration!==a&&(a=u.modeConfiguration,s())}),n.push(Xe(i)),Xe(n)}function Xe(t){return{dispose:()=>$e(t)}}function $e(t){for(;t.length;)t.pop().dispose()}return et(ht);})();
return moduleExports;
});
